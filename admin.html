<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - TVT Quay L√† D√≠nh</title>
    <style>
        :root { --gold: #FFD700; --bg: #0A0A0A; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; margin: 0; padding: 20px; display: flex; justify-content: center; }
        .admin-card { background: #151515; padding: 25px; border-radius: 20px; border: 1px solid var(--gold); width: 100%; max-width: 450px; box-shadow: 0 0 30px rgba(0,0,0,0.5); box-sizing: border-box; }
        h2 { color: var(--gold); text-align: center; text-transform: uppercase; margin-bottom: 20px; letter-spacing: 1px; font-size: 1.3rem; }
        label { display: block; margin-top: 15px; font-size: 0.85rem; color: #aaa; font-weight: bold; }
        textarea, input { width: 100%; padding: 12px; margin-top: 5px; background: #000; border: 1px solid #333; color: white; border-radius: 8px; box-sizing: border-box; font-size: 1rem; }
        .btn-group { display: flex; flex-direction: column; gap: 10px; margin-top: 25px; }
        .btn { padding: 14px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; text-transform: uppercase; transition: 0.3s; text-decoration: none; text-align: center; font-size: 0.9rem; }
        .btn-update-list { background: #28a745; color: white; } /* N√∫t m·ªõi */
        .btn-save-all { background: var(--gold); color: #000; }
        .btn-history { background: #333; color: white; border: 1px solid #555; }
        .btn-reset { background: #ff4444; color: white; }
        .btn-back { background: transparent; color: var(--gold); border: 1px solid var(--gold); }
        .btn:hover { opacity: 0.9; transform: translateY(-2px); }
    </style>
</head>
<body>
    <div class="admin-card">
        <h2>‚öôÔ∏è QU·∫¢N TR·ªä TVT</h2>
        
        <label>DANH S√ÅCH QUAY (M·ªói d√≤ng 1 m√≥n):</label>
        <textarea id="listInput" rows="6" placeholder="Gi·∫£i Nh·∫•t&#10;Gi·∫£i Nh√¨..."></textarea>

        <label>LOGO T√ÇM V√íNG QUAY:</label>
        <input type="file" id="logoInput" accept="image/*">

        <label>H√åNH N·ªÄN ·ª®NG D·ª§NG:</label>
        <input type="file" id="bgInput" accept="image/*">

        <div class="btn-group">
            <button class="btn btn-update-list" onclick="updateListOnly()">üìù C·∫≠p nh·∫≠t danh s√°ch quay</button>
            <button class="btn btn-save-all" onclick="saveAllSettings()">üöÄ L∆∞u t·∫•t c·∫£ c√†i ƒë·∫∑t</button>
            <button class="btn btn-history" onclick="clearHistory()">üóë X√≥a l·ªãch s·ª≠ vinh danh</button>
            <button class="btn btn-reset" onclick="resetApp()">‚ö†Ô∏è XO√Å T·∫§T C·∫¢ (KH√îI PH·ª§C G·ªêC)</button>
            <a href="index.html" class="btn btn-back">‚¨Ö V·ªÅ trang hi·ªÉn th·ªã</a>
        </div>
    </div>

    <script>
        // T·∫£i d·ªØ li·ªáu c≈© l√™n form
        window.onload = () => {
            document.getElementById('listInput').value = localStorage.getItem('tvt_items') || "Gi·∫£i Nh·∫•t\nGi·∫£i Nh√¨\nGi·∫£i Ba\nMay M·∫Øn";
        };

        // CH·ªà C·∫¨P NH·∫¨T DANH S√ÅCH
        function updateListOnly() {
            const list = document.getElementById('listInput').value;
            localStorage.setItem('tvt_items', list);
            localStorage.setItem('tvt_refresh_trigger', Date.now()); // K√≠ch ho·∫°t index c·∫≠p nh·∫≠t
            alert("ƒê√£ c·∫≠p nh·∫≠t danh s√°ch qu√† t·∫∑ng!");
        }

        // L∆ØU T·∫§T C·∫¢ (BAO G·ªíM ·∫¢NH)
        function saveAllSettings() {
            localStorage.setItem('tvt_items', document.getElementById('listInput').value);
            const logoFile = document.getElementById('logoInput').files[0];
            const bgFile = document.getElementById('bgInput').files[0];
            
            const reader = new FileReader();
            if (logoFile) {
                const r1 = new FileReader();
                r1.onload = (e) => localStorage.setItem('tvt_logo', e.target.result);
                r1.readAsDataURL(logoFile);
            }
            if (bgFile) {
                const r2 = new FileReader();
                r2.onload = (e) => localStorage.setItem('tvt_bg', e.target.result);
                r2.readAsDataURL(bgFile);
            }
            
            setTimeout(() => {
                localStorage.setItem('tvt_refresh_trigger', Date.now());
                alert("ƒê√£ l∆∞u t·∫•t c·∫£ c√†i ƒë·∫∑t!");
            }, 500);
        }

        function clearHistory() {
            if (confirm("X√≥a danh s√°ch ng∆∞·ªùi ƒë√£ tr√∫ng th∆∞·ªüng?")) {
                localStorage.removeItem('tvt_history');
                localStorage.setItem('tvt_clear_trigger', Date.now());
                alert("ƒê√£ xo√° l·ªãch s·ª≠!");
            }
        }

        function resetApp() {
            if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën xo√° to√†n b·ªô v√† quay v·ªÅ m·∫∑c ƒë·ªãnh?")) {
                localStorage.clear();
                localStorage.setItem('tvt_refresh_trigger', Date.now());
                alert("ƒê√£ kh√¥i ph·ª•c c√†i ƒë·∫∑t g·ªëc!");
                location.reload();
            }
        }
    </script>
</body>
</html>
